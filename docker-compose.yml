version: '3.7'

services:
  mem:
    image: memcached:alpine
    container_name: mem
    ports:
     - "11211:11211"

    #maven:3.6.3-openjdk-8
  dev:
    container_name: dev
    image: maven:3.6-jdk-8-alpine
    volumes:
    #  - /home/Admin/docker/m2:/root/.m2/repository
      - ./app:/app
    #ports:
    # - "8080:9191"
    working_dir: /app
    command: ["mvn", "clean", "mvn", "verify"]
      #java -jar app/target/embedash-1.1-SNAPSHOT.jar --spring.config.location=/app/application.properties
    
    #java -jar app/target/embedash-1.1-SNAPSHOT.jar --spring.config.location=/app/application.properties
  
  pro:
    container_name: pro
    image: openjdk:8-jre-alpine
    volumes:
    #  - /home/Admin/docker/m2:/root/.m2/repository
      - ./app:/app
    ports:
     - "8080:9191"
    working_dir: /app
    command: java -jar target/embedash-1.1-SNAPSHOT.jar --spring.config.location=./application.properties


networks:
  default:
    external:
      name: nt


